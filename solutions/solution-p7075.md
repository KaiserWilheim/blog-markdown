---
title: P7075 儒略日 题解
date: 2021-09-13
tags:
	- 题解
	- 模拟
categories:
 题解
mathjax: true
---

Luogu P7075

2020 CSP-S T1

<!--more-->
----

真·暴力做法  
可以考虑将从4713BC以来的时间划分为五段：

+ $[0,1721058]$ 对应 4713 BC 至 2 BC
+ $[1721059,2298153]$ 对应 1 BC 至 1579
+ $[2298154,2299604]$ 对应 1580 至 1583
+ $[2299604,2305448]$ 对应 1584 至 1599
+ $[2305448,+∞)$ 对应 1600 及以后

我们可以首先给日期+1，同时把起始日期改为$4713 BC$的$1$月$0$日。  
（后面打表就舒服多了]）

# 公元前

根据儒略历的闰年法则，我们可以得知$4713 BC$是一个**闰年**。 

此时，就可以从$4713 BC$$(-4713yr)$开始，以 ***(闰，平，平，平)*** 的顺序每四年为一个周期对目标日期除以$1461$的余数进行判定。

那么如何判定呢？

作为蒟蒻的我只能想到一种***美妙的方法***：

## 打表。

具体代码如下。  
（同时不要忘了起始时间是$4713 BC$）

{% note primary 打表函数 %}
``` cpp
if((x>=1)&&(x<=31)){
	ans[y][1]=x;
	ans[y][2]=1;//jan 1
}else if((x>=32)&&(x<=60)){
	ans[y][1]=x-31;
	ans[y][2]=2;//feb 1
}else if((x>=61)&&(x<=91)){
	ans[y][1]=x-60;
	ans[y][2]=3;//mar 1
}else if((x>=92)&&(x<=121)){
	ans[y][1]=x-91;
	ans[y][2]=4;//apr 1
}else if((x>=122)&&(x<=152)){
	ans[y][1]=x-121;
	ans[y][2]=5;//may 1
}else if((x>=153)&&(x<=182)){
	ans[y][1]=x-152;
	ans[y][2]=6;//jun 1
}else if((x>=183)&&(x<=213)){
	ans[y][1]=x-182;
	ans[y][2]=7;//jul 1
}else if((x>=214)&&(x<=244)){
	ans[y][1]=x-213;
	ans[y][2]=8;//aug 1
}else if((x>=245)&&(x<=274)){
	ans[y][1]=x-244;
	ans[y][2]=9;//sep 1
}else if((x>=275)&&(x<=305)){
	ans[y][1]=x-274;
	ans[y][2]=10;//oct 1
}else if((x>=306)&&(x<=335)){
	ans[y][1]=x-305;
	ans[y][2]=11;//nov 1
}else if((x>=336)&&(x<=366)){
	ans[y][1]=x-335;
	ans[y][2]=12;//dec 1
}else if((x>=367)&&(x<=397)){
	ans[y][1]=x-366;
	ans[y][2]=1;//jan 2
	ans[y][3]+=1;
}else if((x>=398)&&(x<=425)){
	ans[y][1]=x-397;
	ans[y][2]=2;//feb 2
	ans[y][3]+=1;
}else if((x>=426)&&(x<=456)){
	ans[y][1]=x-425;
	ans[y][2]=3;//mar 2
	ans[y][3]+=1;
}else if((x>=457)&&(x<=486)){
	ans[y][1]=x-456;
	ans[y][2]=4;//apr 2
	ans[y][3]+=1;
}else if((x>=487)&&(x<=517)){
	ans[y][1]=x-486;
	ans[y][2]=5;//may 2
	ans[y][3]+=1;
}else if((x>=518)&&(x<=547)){
	ans[y][1]=x-517;
	ans[y][2]=6;//jun 2
	ans[y][3]+=1;
}else if((x>=548)&&(x<=578)){
	ans[y][1]=x-547;
	ans[y][2]=7;//jul 2
	ans[y][3]+=1;
}else if((x>=579)&&(x<=609)){
	ans[y][1]=x-578;
	ans[y][2]=8;//aug 2
	ans[y][3]+=1;
}else if((x>=610)&&(x<=639)){
	ans[y][1]=x-609;
	ans[y][2]=9;//sep 2
	ans[y][3]+=1;
}else if((x>=640)&&(x<=670)){
	ans[y][1]=x-639;
	ans[y][2]=10;//oct 2
	ans[y][3]+=1;
}else if((x>=671)&&(x<=700)){
	ans[y][1]=x-670;
	ans[y][2]=11;//nov 2
	ans[y][3]+=1;
}else if((x>=701)&&(x<=731)){
	ans[y][1]=x-700;
	ans[y][2]=12;//dec 2
	ans[y][3]+=1;
}else if((x>=732)&&(x<=762)){
	ans[y][1]=x-731;
	ans[y][2]=1;//jan 3
	ans[y][3]+=2;
}else if((x>=763)&&(x<=790)){
	ans[y][1]=x-762;
	ans[y][2]=2;//feb 3
	ans[y][3]+=2;
}else if((x>=791)&&(x<=821)){
	ans[y][1]=x-790;
	ans[y][2]=3;//mar 3
	ans[y][3]+=2;
}else if((x>=822)&&(x<=851)){
	ans[y][1]=x-821;
	ans[y][2]=4;//apr 3
	ans[y][3]+=2;
}else if((x>=852)&&(x<=882)){
	ans[y][1]=x-851;
	ans[y][2]=5;//may 3
	ans[y][3]+=2;
}else if((x>=883)&&(x<=912)){
	ans[y][1]=x-882;
	ans[y][2]=6;//jun 3
	ans[y][3]+=2;
}else if((x>=913)&&(x<=943)){
	ans[y][1]=x-912;
	ans[y][2]=7;//jul 3
	ans[y][3]+=2;
}else if((x>=944)&&(x<=974)){
	ans[y][1]=x-943;
	ans[y][2]=8;//aug 3
	ans[y][3]+=2;
}else if((x>=975)&&(x<=1004)){
	ans[y][1]=x-974;
	ans[y][2]=9;//sep 3
	ans[y][3]+=2;
}else if((x>=1005)&&(x<=1035)){
	ans[y][1]=x-1004;
	ans[y][2]=10;//oct 3  
	ans[y][3]+=2;
}else if((x>=1036)&&(x<=1065)){
	ans[y][1]=x-1035;
	ans[y][2]=11;//nov 3
	ans[y][3]+=2;
}else if((x>=1066)&&(x<=1096)){
	ans[y][1]=x-1065;
	ans[y][2]=12;//dec 3
	ans[y][3]+=2;
}else if((x>=1097)&&(x<=1127)){
	ans[y][1]=x-1096;
	ans[y][2]=1;//jan 4
	ans[y][3]+=3;
}else if((x>=1128)&&(x<=1155)){
	ans[y][1]=x-1127;
	ans[y][2]=2;//feb 4
	ans[y][3]+=3;
}else if((x>=1156)&&(x<=1186)){
	ans[y][1]=x-1155;
	ans[y][2]=3;//mar 4
	ans[y][3]+=3;
}else if((x>=1187)&&(x<=1216)){
	ans[y][1]=x-1186;
	ans[y][2]=4;//apr 4
	ans[y][3]+=3;
}else if((x>=1217)&&(x<=1247)){
	ans[y][1]=x-1216;
	ans[y][2]=5;//may 4
	ans[y][3]+=3;
}else if((x>=1248)&&(x<=1277)){
	ans[y][1]=x-1247;
	ans[y][2]=6;//jun 4
	ans[y][3]+=3;
}else if((x>=1278)&&(x<=1308)){
	ans[y][1]=x-1277;
	ans[y][2]=7;//jul 4
	ans[y][3]+=3;
}else if((x>=1309)&&(x<=1339)){
	ans[y][1]=x-1308;
	ans[y][2]=8;//aug 4
	ans[y][3]+=3;
}else if((x>=1340)&&(x<=1369)){
	ans[y][1]=x-1339;
	ans[y][2]=9;//sep 4
	ans[y][3]+=3;
}else if((x>=1370)&&(x<=1400)){
	ans[y][1]=x-1369;
	ans[y][2]=10;//oct 4
	ans[y][3]+=3;
}else if((x>=1401)&&(x<=1430)){
	ans[y][1]=x-1400;
	ans[y][2]=11;//nov 4
	ans[y][3]+=3;
}else if((x>=1431)&&(x<=1461)){
	ans[y][1]=x-1430;
	ans[y][2]=12;//dec 4
	ans[y][3]+=3;
}
```
{% endnote %}
**是不是很简单？**

我想你们的答案应该是肯定的。

# 公元后（包括1 BC）

下一步是$1 BC$到$1579$年的这段时间。  
这一段时间适用于***儒略历***，不用考虑特殊平年。  
由于没有公元零年，而且$1 BC$正好是一个闰年，所以我们可以把它当做**公元零年**来看待——只要最后加一个判定***改回来***即可。  
正好也满足我们的“四年一闰”法则——$0/4=0……0$  
这一步不要忘了要把时间减去$1721058$，顺便把起始时间改为 **公元零年** $(0yr)$。（ ***记得改回来*** ）

下一步我们就到了——

# 公元1580年至公元1583年

这时，我们就遇到了

**可恶的格里高利十三世**

$1580$年到$1583$年是一个特判区间，需要对上面的代码进行一点改动……

``` cpp
else if((n>=1005)&&(n<=1008)){
	ans[i][1]=n-1004;
	ans[i][2]=10;//oct 3(normal)
	ans[i][3]+=2;
}else if((n>=1008)&&(n<=1025)){
	ans[i][1]=n-994;
	ans[i][2]=10;//oct 3(special)
	ans[i][3]+=2;
```

**就是这样。**

后面的判断区间依次$-10$。不要忘了检查每个数字是否都有$-10$~~，因为我自己就卡了~~。  

# 公元1584年至公元1599年

$1584$年到$1599$年正好避开了格里高利历的特判平年，使之**适用于儒略历**，可以简单地套之前的代码。  
不要忘了减时间$(2299604)$和改起始时间$(1584yr)$。

# 公元1600年以后

现在我们来到了$1600$年——此时就需要使用 ***格里高利历*** 了。  
格里高利历的特点是——

## 世纪平年

（这是我自己叫的）  

现在以就需要以$400$年——$146097$天为一个周期进行判定。  
上来就给平年一个特判——

``` cpp
if((n>=36526)&&(n<=36890)||(n>=73050)&&(n<=73414)||(n>=109574)&&(n<=109938)){
	flt[i]=true;//是否为平年
	if((n>=36526)&&(n<=36890)){
		n-=36525;
		ans[i][3]+=100;
	}else if((n>=73050)&&(n<=73414)){
		n-=73049;
		ans[i][3]+=200;
	}else if((n>=109574)&&(n<=109938)){
		n-=109573;
		ans[i][3]+=300;
	}
   //下面是平年特判，省略掉吧，不然太长了
```

之后给剩下的年份之内的日期加一个小小的调整：  
分别给每$400$年内，第$101$年至第$199$年/第$201$年至第$299$年/第$301$年至第$399$年，的日期分别$+1/+2/+3$，
来抵消掉三个特殊的世纪平年带来的影响，以使之适用于 ***儒略历*** 。  
这时候就可以套之前的代码了  
不要忘了减日期$(2305448)$和更改起始年份$(1600yr)$

至此，所有的时间段都被解决了。  
这时候你就~~得到了一份可以AC的程序~~并没有。

# 最后的修正

话说回来，**0月0日**、**1月0日**到底是什么东西？？  
~~（我的程序根本不会写出0月啊）~~  
所以要加一个特判，把这种误入歧途的答案拉回来。

``` cpp
if(ans[i][1]==0){
	if(ans[i][2]<=1){
		ans[i][3]--;
		ans[i][2]=12;
		ans[i][1]=31;
	}else{
		ans[i][2]--;
		if(flt[i]==false){
			ans[i][1]=ryr[ans[i][2]];
		}else{
			ans[i][1]=pyr[ans[i][2]];
		}
	}
}//防止0月、0日情况的出现 
```
最后就可以输出了！
完美！AC！

附上完整代码：
{% note success 完整代码 %}
``` cpp
#include <bits/stdc++.h>
using namespace str;
int ans[100010][3];
bool flt[100010];
int ryr[20] = { 0,31,29,31,30,31,30,31,31,30,31,30,31 };
int pyr[20] = { 0,31,28,31,30,31,30,31,31,30,31,30,31 };
void chq(int i, int n)
{
	if((n >= 1) && (n <= 31))
	{
		ans[i][1] = n;
		ans[i][2] = 1;//jan 1
	}
	else if((n >= 32) && (n <= 60))
	{
		ans[i][1] = n - 31;
		ans[i][2] = 2;//feb 1
	}
	else if((n >= 61) && (n <= 91))
	{
		ans[i][1] = n - 60;
		ans[i][2] = 3;//mar 1
	}
	else if((n >= 92) && (n <= 121))
	{
		ans[i][1] = n - 91;
		ans[i][2] = 4;//apr 1
	}
	else if((n >= 122) && (n <= 152))
	{
		ans[i][1] = n - 121;
		ans[i][2] = 5;//may 1
	}
	else if((n >= 153) && (n <= 182))
	{
		ans[i][1] = n - 152;
		ans[i][2] = 6;//jun 1
	}
	else if((n >= 183) && (n <= 213))
	{
		ans[i][1] = n - 182;
		ans[i][2] = 7;//jul 1
	}
	else if((n >= 214) && (n <= 244))
	{
		ans[i][1] = n - 213;
		ans[i][2] = 8;//aug 1
	}
	else if((n >= 245) && (n <= 274))
	{
		ans[i][1] = n - 244;
		ans[i][2] = 9;//sep 1
	}
	else if((n >= 275) && (n <= 305))
	{
		ans[i][1] = n - 274;
		ans[i][2] = 10;//oct 1
	}
	else if((n >= 306) && (n <= 335))
	{
		ans[i][1] = n - 305;
		ans[i][2] = 11;//nov 1
	}
	else if((n >= 336) && (n <= 366))
	{
		ans[i][1] = n - 335;
		ans[i][2] = 12;//dec 1
	}
	else if((n >= 367) && (n <= 397))
	{
		ans[i][1] = n - 366;
		ans[i][2] = 1;//jan 2
		ans[i][3] += 1;
	}
	else if((n >= 398) && (n <= 425))
	{
		ans[i][1] = n - 397;
		ans[i][2] = 2;//feb 2
		ans[i][3] += 1;
	}
	else if((n >= 426) && (n <= 456))
	{
		ans[i][1] = n - 425;
		ans[i][2] = 3;//mar 2
		ans[i][3] += 1;
	}
	else if((n >= 457) && (n <= 486))
	{
		ans[i][1] = n - 456;
		ans[i][2] = 4;//apr 2
		ans[i][3] += 1;
	}
	else if((n >= 487) && (n <= 517))
	{
		ans[i][1] = n - 486;
		ans[i][2] = 5;//may 2
		ans[i][3] += 1;
	}
	else if((n >= 518) && (n <= 547))
	{
		ans[i][1] = n - 517;
		ans[i][2] = 6;//jun 2
		ans[i][3] += 1;
	}
	else if((n >= 548) && (n <= 578))
	{
		ans[i][1] = n - 547;
		ans[i][2] = 7;//jul 2
		ans[i][3] += 1;
	}
	else if((n >= 579) && (n <= 609))
	{
		ans[i][1] = n - 578;
		ans[i][2] = 8;//aug 2
		ans[i][3] += 1;
	}
	else if((n >= 610) && (n <= 639))
	{
		ans[i][1] = n - 609;
		ans[i][2] = 9;//sep 2
		ans[i][3] += 1;
	}
	else if((n >= 640) && (n <= 670))
	{
		ans[i][1] = n - 639;
		ans[i][2] = 10;//oct 2
		ans[i][3] += 1;
	}
	else if((n >= 671) && (n <= 700))
	{
		ans[i][1] = n - 670;
		ans[i][2] = 11;//nov 2
		ans[i][3] += 1;
	}
	else if((n >= 701) && (n <= 731))
	{
		ans[i][1] = n - 700;
		ans[i][2] = 12;//dec 2
		ans[i][3] += 1;
	}
	else if((n >= 732) && (n <= 762))
	{
		ans[i][1] = n - 731;
		ans[i][2] = 1;//jan 3
		ans[i][3] += 2;
	}
	else if((n >= 763) && (n <= 790))
	{
		ans[i][1] = n - 762;
		ans[i][2] = 2;//feb 3
		ans[i][3] += 2;
	}
	else if((n >= 791) && (n <= 821))
	{
		ans[i][1] = n - 790;
		ans[i][2] = 3;//mar 3
		ans[i][3] += 2;
	}
	else if((n >= 822) && (n <= 851))
	{
		ans[i][1] = n - 821;
		ans[i][2] = 4;//apr 3
		ans[i][3] += 2;
	}
	else if((n >= 852) && (n <= 882))
	{
		ans[i][1] = n - 851;
		ans[i][2] = 5;//may 3
		ans[i][3] += 2;
	}
	else if((n >= 883) && (n <= 912))
	{
		ans[i][1] = n - 882;
		ans[i][2] = 6;//jun 3
		ans[i][3] += 2;
	}
	else if((n >= 913) && (n <= 943))
	{
		ans[i][1] = n - 912;
		ans[i][2] = 7;//jul 3
		ans[i][3] += 2;
	}
	else if((n >= 944) && (n <= 974))
	{
		ans[i][1] = n - 943;
		ans[i][2] = 8;//aug 3
		ans[i][3] += 2;
	}
	else if((n >= 975) && (n <= 1004))
	{
		ans[i][1] = n - 974;
		ans[i][2] = 9;//sep 3
		ans[i][3] += 2;
	}
	else if((n >= 1005) && (n <= 1035))
	{
		ans[i][1] = n - 1004;
		ans[i][2] = 10;//oct 3  
		ans[i][3] += 2;
	}
	else if((n >= 1036) && (n <= 1065))
	{
		ans[i][1] = n - 1035;
		ans[i][2] = 11;//nov 3
		ans[i][3] += 2;
	}
	else if((n >= 1066) && (n <= 1096))
	{
		ans[i][1] = n - 1065;
		ans[i][2] = 12;//dec 3
		ans[i][3] += 2;
	}
	else if((n >= 1097) && (n <= 1127))
	{
		ans[i][1] = n - 1096;
		ans[i][2] = 1;//jan 4
		ans[i][3] += 3;
	}
	else if((n >= 1128) && (n <= 1155))
	{
		ans[i][1] = n - 1127;
		ans[i][2] = 2;//feb 4
		ans[i][3] += 3;
	}
	else if((n >= 1156) && (n <= 1186))
	{
		ans[i][1] = n - 1155;
		ans[i][2] = 3;//mar 4
		ans[i][3] += 3;
	}
	else if((n >= 1187) && (n <= 1216))
	{
		ans[i][1] = n - 1186;
		ans[i][2] = 4;//apr 4
		ans[i][3] += 3;
	}
	else if((n >= 1217) && (n <= 1247))
	{
		ans[i][1] = n - 1216;
		ans[i][2] = 5;//may 4
		ans[i][3] += 3;
	}
	else if((n >= 1248) && (n <= 1277))
	{
		ans[i][1] = n - 1247;
		ans[i][2] = 6;//jun 4
		ans[i][3] += 3;
	}
	else if((n >= 1278) && (n <= 1308))
	{
		ans[i][1] = n - 1277;
		ans[i][2] = 7;//jul 4
		ans[i][3] += 3;
	}
	else if((n >= 1309) && (n <= 1339))
	{
		ans[i][1] = n - 1308;
		ans[i][2] = 8;//aug 4
		ans[i][3] += 3;
	}
	else if((n >= 1340) && (n <= 1369))
	{
		ans[i][1] = n - 1339;
		ans[i][2] = 9;//sep 4
		ans[i][3] += 3;
	}
	else if((n >= 1370) && (n <= 1400))
	{
		ans[i][1] = n - 1369;
		ans[i][2] = 10;//oct 4
		ans[i][3] += 3;
	}
	else if((n >= 1401) && (n <= 1430))
	{
		ans[i][1] = n - 1400;
		ans[i][2] = 11;//nov 4
		ans[i][3] += 3;
	}
	else if((n >= 1431) && (n <= 1461))
	{
		ans[i][1] = n - 1430;
		ans[i][2] = 12;//dec 4
		ans[i][3] += 3;
	}
}
int main()
{
	long long Q, n;
	cin >> Q;
	for(int i = 1; i <= Q; i++)
	{
		cin >> n;
		n++;
		ans[i][3] = -4713;
		if(n <= 1721058)
		{
			//区间 BC4713-BC2 开始 
			ans[i][3] += (n / 1461) * 4;
			n = n % 1461;
			if((n >= 1) && (n <= 366))
			{
				flt[i] = false;
			}
			else
			{
				flt[i] = true;
			}
			chq(i, n);
			//区间 BC4713-BC2 结束 

		}
		else if((n > 1721058) && (n <= 2298153))
		{
			//区间 BC1-1579 开始 
			n -= 1721058;
			ans[i][3] = 0;
			ans[i][3] += (n / 1461) * 4;
			n = n % 1461;
			if((n >= 1) && (n <= 366))
			{
				flt[i] = false;
			}
			else
			{
				flt[i] = true;
			}
			chq(i, n);
			if(ans[i][3] == 0)ans[i][3] = -1;
			//区间 BC1-1579 结束 
		}
		else if((n > 2298153) && (n <= 2299604))
		{
			//特判区间 1580-1583 开始
			n -= 2298153;
			ans[i][3] = 1580;
			if((n >= 1) && (n <= 366))
			{
				flt[i] = false;
			}
			else
			{
				flt[i] = true;
			}
			if((n >= 1005) && (n <= 1008))
			{
				ans[i][1] = n - 1004;
				ans[i][2] = 10;//oct 3(normal)
				ans[i][3] += 2;
			}
			else if((n >= 1008) && (n <= 1025))
			{
				ans[i][1] = n - 994;
				ans[i][2] = 10;//oct 3(special)
				ans[i][3] += 2;
			}
			else
			{
				chq(i, n);
			}
			//特判区间 1580-1583 结束 
		}
		else if((n > 2299604) && (n <= 2305448))
		{
			//区间 1584-1599 开始 
			n -= 2299604;
			ans[i][3] = 1584;
			ans[i][3] += (n / 1461) * 4;
			n = n % 1461;
			if((n >= 1) && (n <= 366))
			{
				flt[i] = false;
			}
			else
			{
				flt[i] = true;
			}
			chq(i, n);
			//区间 1584-1599 结束 
		}
		else if(n > 2305448)
		{
			n -= 2305448;
			ans[i][3] = 1600;
			int r = n / 146097;
			n %= 146097;
			ans[i][3] += (r * 400);
			if((n >= 36526) && (n <= 36890) || (n >= 73050) && (n <= 73414) || (n >= 109574) && (n <= 109938))
			{
				flt[i] = true;
				if((n >= 36526) && (n <= 36890))
				{
					n -= 36525;
					ans[i][3] += 100;
				}
				else if((n >= 73050) && (n <= 73414))
				{
					n -= 73049;
					ans[i][3] += 200;
				}
				else if((n >= 109574) && (n <= 109938))
				{
					n -= 109573;
					ans[i][3] += 300;
				}
				if((n >= 1) && (n <= 31))
				{
					ans[i][1] = n;
					ans[i][2] = 1;//jan 1
				}
				else if((n >= 32) && (n <= 59))
				{
					ans[i][1] = n - 31;
					ans[i][2] = 2;//feb 1
				}
				else if((n >= 60) && (n <= 90))
				{
					ans[i][1] = n - 59;
					ans[i][2] = 3;//mar 1
				}
				else if((n >= 91) && (n <= 120))
				{
					ans[i][1] = n - 90;
					ans[i][2] = 4;//apr 1
				}
				else if((n >= 121) && (n <= 151))
				{
					ans[i][1] = n - 120;
					ans[i][2] = 5;//may 1
				}
				else if((n >= 152) && (n <= 181))
				{
					ans[i][1] = n - 151;
					ans[i][2] = 6;//jun 1
				}
				else if((n >= 182) && (n <= 212))
				{
					ans[i][1] = n - 181;
					ans[i][2] = 7;//jul 1
				}
				else if((n >= 213) && (n <= 243))
				{
					ans[i][1] = n - 212;
					ans[i][2] = 8;//aug 1
				}
				else if((n >= 244) && (n <= 273))
				{
					ans[i][1] = n - 243;
					ans[i][2] = 9;//sep 1
				}
				else if((n >= 274) && (n <= 304))
				{
					ans[i][1] = n - 273;
					ans[i][2] = 10;//oct 1
				}
				else if((n >= 305) && (n <= 334))
				{
					ans[i][1] = n - 304;
					ans[i][2] = 11;//nov 1
				}
				else if((n >= 335) && (n <= 365))
				{
					ans[i][1] = n - 334;
					ans[i][2] = 12;//dec 1
				}//平年特判 
			}
			else
			{
				if((n >= 36891) && (n <= 73049))
				{
					n += 1;
				}
				else if((n >= 73415) && (n <= 109573))
				{
					n += 2;
				}
				else if((n >= 109939) && (n <= 146097))
				{
					n += 3;
				}
				ans[i][3] += (n / 1461) * 4;
				n = n % 1461;
				if((n >= 1) && (n <= 366))
				{
					flt[i] = false;
				}
				else
				{
					flt[i] = true;
				}
				chq(i, n);
			}
		}
	}
	for(int i = 1; i <= Q; i++)
	{
		if(ans[i][1] == 0)
		{
			if(ans[i][2] <= 1)
			{
				ans[i][3]--;
				ans[i][2] = 12;
				ans[i][1] = 31;
			}
			else
			{
				ans[i][2]--;
				if(flt[i] == false)
				{
					ans[i][1] = ryr[ans[i][2]];
				}
				else
				{
					ans[i][1] = pyr[ans[i][2]];
				}
			}
		}//防止0月、0日情况的出现 
		if(ans[i][3] < 0)
		{
			cout << ans[i][1] << " " << ans[i][2] << " " << -ans[i][3] << " BC" << endl;
		}
		else if(ans[i][3] > 0)
		{
			cout << ans[i][1] << " " << ans[i][2] << " " << ans[i][3] << endl;
		}
	}
	return 0;
}
```
{% endnote %}
$\color[rgb]{1,1,0.0625}{φ}$
