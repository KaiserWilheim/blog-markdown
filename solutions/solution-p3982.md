---
title: P3982 龙盘雪峰信息解析器 题解
date: 2021-09-29 
tags:
	- 题解
	- 模拟
categories:
 题解
mathjax: true
---

Luogu P3982

<!--more-->
----

一道比较简单的模拟题。
打开题目，迎面而来的一关是理解题目。

题面如下：

> 龙盘雪峰传来的信息都加密成了复杂的代码，我们需要你来做一个程序，按照解析规则解密这些代码，翻译成文字信息，以下是其解析规则：
该代码应为一连串的二进制码（只存在 $0$ 和 $1$ ，做加法时满 $2$ 进 $1$ ，每个 $0$ 或 $1$ 占一个字符），每八个字符为一单元（这也是规则）。
每个单元都有这样的规则：
一、若【前三个字符】为 $101$ 时表示需要转换为字母 $A - Z$ ，字母 $A$ 代码为 `10100000` ，字母 $C$ 为 `10100010` ， $26$ 个**大写字母**以字母表顺序按照这种规律顺序排列，分别对应一个二进制代码。
二、若【前三个字符】为 $111$ ，则该单元翻译为空格。
三、若【第一个字符】为 $0$ ，则该单元表示一个数，待定**与下一个单元所表示的数做加法**。加法过程中，这**两个单元**应转换为十进制，然后除以 $2$ 并**舍弃余数**才相加，加法结束后，这**两个单元**做加法得到的结果即为这两个单元的翻译结果，用十进制表示。
由于保险，龙盘雪峰经常发送【假代码】，而假代码则不存在上述规则，如果是假代码，仅输出 $Error$ 。

注意：**“仅输出Error”** 。

这就需要我们边解码边判断，把解码后的结果存到数组里，最后再输出。

首先，我们需要对题目进行一下解码：

我们输出 $Error$ 的条件有以下几个：

1. 字符串的长度不能被8整除；

下面是解决的代码块：

``` cpp
 if(s.length()%8!=0)
 {//源信息长度能否被8整除 
 	goto end;
 }
```

2. 字符串里有非 $0$ 或 $1$ 的字符；

``` cpp
 for(int i=0;i<s.length();i++)
 {//源信息存在0和1以外的字符 
 	if((s[i]!='1')&&(s[i]!='0')){
 		goto end;
 	}
 }
 ```

3. 某个单元不是以 $101$ 、 $111$ 或 $0$ 开头；
4. 某个以 $0$ 开头的单元作为一个数字单元对的起始单元后面跟的是非数字单元（即不是以 $0$ 开头）或后面没有单元；
5. 某个以 $101$ 开头的单元转换后得到的二进制数 $ \geq 26$ （即不能映射到 $A-Z$ 范围内的字符）；

这三点在解码的时候顺便解决。

接下来上代码：

``` cpp
#include <bits/stdc++.h>
using namespace str;
int main(){
	string s;
	int ans[22000];
	int c[8];
	cin>>s;
	if(s.length()%8!=0)
	{//源信息长度能否被8整除 
		goto end;
	}
	for(int i=0;i<s.length();i++)
	{//源信息存在0和1以外的字符 
		if((s[i]!='1')&&(s[i]!='0')){
			goto end;
		}
	}
	for(int i=0;i<s.length()/8;i++){
		for(int j=1;j<=8;j++)c[j]=s[8*i+j-1]-'0';
		if(c[1]==1){
			if(c[2]==1){
				if(c[3]!=1)
				{//非空格单元头 
					goto end;
				} 
				ans[i+1]=-100;
				continue;
			}else if(c[2]==0){
				if(c[3]!=1)
				{//非字母单元头 
					goto end;
				} 
				int temp=c[4]*16+c[5]*8+c[6]*4+c[7]*2+c[8]+1;
				if(temp>26)
				{//一个字母单元转换后的结果大于等于26 
					goto end;
				}
				ans[i+1]=-temp;
			}
		}else if(c[1]==0){
			int d[10];
			for(int j=1;j<=8;j++)d[j]=s[8*i+j+7]-'0';
			if(d[1]!=0)
			{//数字开始单元之后的单元不是数字单元 
				goto end;
			}
			int e=c[2]*64+c[3]*32+c[4]*16+c[5]*8+c[6]*4+c[7]*2+c[8];
			int f=d[2]*64+d[3]*32+d[4]*16+d[5]*8+d[6]*4+d[7]*2+d[8];
			ans[i+1]=e/2+f/2;
			ans[i+2]=-1000;
			i++;
		}
	}
	for(int i=1;i<=s.length()/8;i++){
		if(ans[i]==-1000)continue;
		if(ans[i]==-100){
			cout<<" ";
			continue;
		}
		if((ans[i]<0)&&(ans[i]!=-1000)){
			char un='A'-ans[i]-1;
			cout<<un;
			continue;
		}
		if(ans[i]>=0){
			cout<<ans[i];
			continue;
		}
	}
	cout<<endl;
	return 0;
	end:;
	cout<<"Error"<<endl;
	return 0;
} 
```
$\color[rgb]{1,1,0.0625}{φ}$

感谢阅读。